---
/**
 * NANKANã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã¸ã®å°ç·šCTA
 * å—é–¢ç«¶é¦¬ãƒ»ãƒ‡ãƒ¼ã‚¿äºˆæƒ³é–¢é€£è¨˜äº‹ã«è¡¨ç¤º
 */

interface Props {
  variant?: 'nankan' | 'data';
}

const { variant = 'nankan' } = Astro.props;

const content = {
  nankan: {
    emoji: 'ğŸ¤–',
    title: 'å—é–¢ç«¶é¦¬ã®AIäºˆæƒ³ã«èˆˆå‘³ãŒã‚ã‚‹æ–¹ã¸',
    description: 'NANKANã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã§ã¯ã€æ©Ÿæ¢°å­¦ç¿’ã‚’ä½¿ã£ãŸå—é–¢ç«¶é¦¬ã®äºˆæƒ³ã‚’å…¬é–‹ä¸­ï¼',
    features: [
      'å¤§äº•ãƒ»å·å´ãƒ»èˆ¹æ©‹ãƒ»æµ¦å’Œã®å…¨ãƒ¬ãƒ¼ã‚¹å¯¾å¿œ',
      'AIäºˆæƒ³ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è§£èª¬è¨˜äº‹',
      'éå»ã®çš„ä¸­å®Ÿç¸¾å…¬é–‹',
    ],
    buttonText: 'NANKANã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã‚’è¦‹ã‚‹',
  },
  data: {
    emoji: 'ğŸ“Š',
    title: 'ãƒ‡ãƒ¼ã‚¿äºˆæƒ³ã‚’æœ¬æ ¼çš„ã«å­¦ã³ãŸã„æ–¹ã¸',
    description: 'NANKANã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã§ã¯ã€AIãƒ»æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹ç«¶é¦¬äºˆæƒ³ã®æŠ€è¡“ã‚’è©³ã—ãè§£èª¬ï¼',
    features: [
      'æ©Ÿæ¢°å­¦ç¿’ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å®Ÿè£…ä¾‹',
      'Pythonã‚³ãƒ¼ãƒ‰ã§å­¦ã¶ãƒ‡ãƒ¼ã‚¿åˆ†æ',
      'äºˆæƒ³ãƒ¢ãƒ‡ãƒ«ã®ç²¾åº¦æ¤œè¨¼æ–¹æ³•',
    ],
    buttonText: 'æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’èª­ã‚€',
  },
};

const { emoji, title, description, features, buttonText } = content[variant];
---

<aside class="nankan-cta" data-cta-type={variant}>
  <div class="nankan-cta__container">
    <div class="nankan-cta__icon">{emoji}</div>
    <div class="nankan-cta__content">
      <h3 class="nankan-cta__title">{title}</h3>
      <p class="nankan-cta__description">{description}</p>
      <ul class="nankan-cta__features">
        {features.map((feature) => (
          <li>âœ… {feature}</li>
        ))}
      </ul>
      <a
        href="https://nankan-analytics.keiba.link"
        target="_blank"
        rel="noopener noreferrer"
        class="nankan-cta__button"
        data-analytics-event="click_nankan_cta"
        data-analytics-label={variant}
      >
        {buttonText} â†’
      </a>
    </div>
  </div>
</aside>

<style>
  .nankan-cta {
    margin: 3rem 0;
    padding: 2rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
    color: white;
  }

  .nankan-cta__container {
    display: flex;
    gap: 1.5rem;
    align-items: flex-start;
  }

  .nankan-cta__icon {
    font-size: 3rem;
    flex-shrink: 0;
    animation: bounce 2s infinite;
  }

  @keyframes bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .nankan-cta__content {
    flex: 1;
  }

  .nankan-cta__title {
    font-size: 1.5rem;
    font-weight: bold;
    margin: 0 0 0.75rem;
    color: white;
  }

  .nankan-cta__description {
    margin: 0 0 1rem;
    opacity: 0.95;
    line-height: 1.6;
  }

  .nankan-cta__features {
    list-style: none;
    padding: 0;
    margin: 0 0 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .nankan-cta__features li {
    opacity: 0.95;
    line-height: 1.5;
  }

  .nankan-cta__button {
    display: inline-block;
    padding: 0.875rem 2rem;
    background: white;
    color: #667eea;
    font-weight: bold;
    text-decoration: none;
    border-radius: 8px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  }

  .nankan-cta__button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    background: #f8f9fa;
  }

  @media (max-width: 768px) {
    .nankan-cta {
      padding: 1.5rem;
    }

    .nankan-cta__container {
      flex-direction: column;
      gap: 1rem;
    }

    .nankan-cta__icon {
      font-size: 2.5rem;
    }

    .nankan-cta__title {
      font-size: 1.25rem;
    }

    .nankan-cta__button {
      width: 100%;
      text-align: center;
    }
  }
</style>

<script>
  // GA4ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ï¼ˆã‚¯ãƒªãƒƒã‚¯è¿½è·¡ï¼‰
  document.addEventListener('DOMContentLoaded', () => {
    const ctaButtons = document.querySelectorAll('[data-analytics-event="click_nankan_cta"]');

    ctaButtons.forEach((button) => {
      button.addEventListener('click', () => {
        const label = button.getAttribute('data-analytics-label') || 'unknown';

        // Google Analytics 4
        if (typeof gtag !== 'undefined') {
          gtag('event', 'click_nankan_cta', {
            event_category: 'CTA',
            event_label: label,
            value: 1,
          });
        }

        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
        console.log('CTA clicked:', label);
      });
    });
  });
</script>
